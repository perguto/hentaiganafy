// const fs=require('fs')
// fs.readFileSync('./rois.tsv')

// let response = await fetch("./rois.json")
// console.log(response)

// (()=>{

interface Table {
	[entry:string]:string
}
interface HentaiganaTable {
	[hiragana:string]:[string,string,string][]
}

function _remap(s:string,table:Table){
	let t=''
	for(let i = 0; i<s.length; i++){
		const c=s[i]
		t+=(table[c]??c)
	}
	return t
}



const hira2romTable : Table = { 
	"ã‚":"a",
	"ã„":"i",
	"ã†":"u",
	"ãˆ":"e",
	"ãŠ":"o",
	"ã‹":"ka",
	"ã":"ki",
	"ã":"ku",
	"ã‘":"ke",
	"ã“":"ko",
	"ã•":"sa",
	"ã—":"si",
	"ã™":"su",
	"ã›":"se",
	"ã":"so",
	"ãŸ":"ta",
	"ã¡":"ti",
	"ã¤":"tu",
	"ã¦":"te",
	"ã¨":"to",
	"ãª":"na",
	"ã«":"ni",
	"ã¬":"nu",
	"ã­":"ne",
	"ã®":"no",
	"ã¯":"ha",
	"ã²":"hi",
	"ãµ":"hu",
	"ã¸":"he",
	"ã»":"ho",
	"ã¾":"ma",
	"ã¿":"mi",
	"ã‚€":"mu",
	"ã‚":"me",
	"ã‚‚":"mo",
	"ã‚„":"ya",
	"ã‚†":"yu",
	"ã‚ˆ":"yo",
	"ã‚‰":"ra",
	"ã‚Š":"ri",
	"ã‚‹":"ru",
	"ã‚Œ":"re",
	"ã‚":"ro",
	"ã‚":"wa",
	"ã‚":"wi",
	"ã‚‘":"we",
	"ã‚’":"wo",
	"ã‚“":"nn",
}

const rom2hiraTable = reverseDictionary(hira2romTable)

function reverseDictionary(o:Table){
	//let p=new o.constructor()
	let p:Table={}
	for (let [k,v] of Object.entries(o)){
		p[v]=k
	}
	return p
}


function rom2hira(s:string) {
	s=s.replaceAll(/[kgsztdnhbpmrywn]?[aiueo]/gi,t=>rom2hiraTable[t.toLowerCase()]??t)
	return s
}

function normalize(s:string){
	s=rom2hira(s)
	return s
}
// const hentaiganaTable = globalThis.Deno ?
// 	globalThis.Deno.readTextFileSync("./rois.json")
// :
// 	await fetch("./rois.json").then(r => r.text())

// const hira2hentai : HentaiganaTable = JSON.parse(hentaiganaTable)
const hira2hentai : HentaiganaTable  = 
{
"ã‚": [[ "ğ›€‚","å®‰" ,"U+1B002"],[ "ğ›€ƒ","æ„›" ,"U+1B003"],[ "ğ›€„","é˜¿" ,"U+1B004"],[ "ğ›€…","æƒ¡" ,"U+1B005"]],
"ã„": [[ "ğ›€†","ä»¥" ,"U+1B006"],[ "ğ›€‡","ä¼Š" ,"U+1B007"],[ "ğ›€ˆ","æ„" ,"U+1B008"],[ "ğ›€‰","ç§»" ,"U+1B009"]],
"ã†": [[ "ğ›€Š","å®‡" ,"U+1B00A"],[ "ğ›€‹","å®‡" ,"U+1B00B"],[ "ğ›€Œ","æ†‚" ,"U+1B00C"],[ "ğ›€","æœ‰" ,"U+1B00D"],[ "ğ›€","é›²" ,"U+1B00E"]],
"ãˆ": [[ "ğ›€","ç›ˆ" ,"U+1B00F"],[ "ğ›€","ç¸" ,"U+1B010"],[ "ğ›€‘","è¡£" ,"U+1B011"],[ "ğ›€’","è¡£" ,"U+1B012"],[ "ğ›€“","è¦" ,"U+1B013"]],
"ãŠ": [[ "ğ›€”","æ–¼" ,"U+1B014"],[ "ğ›€•","æ–¼" ,"U+1B015"],[ "ğ›€–","éš±" ,"U+1B016"]],
"ã‹": [[ "ğ›€—","ä½³" ,"U+1B017"],[ "ğ›€˜","åŠ " ,"U+1B018"],[ "ğ›€™","å¯" ,"U+1B019"],[ "ğ›€š","å¯" ,"U+1B01A"],[ "ğ›€›","å˜‰" ,"U+1B01B"],[ "ğ›€œ","æˆ‘" ,"U+1B01C"],[ "ğ›€","æ­Ÿ" ,"U+1B01D"],[ "ğ›€","è³€" ,"U+1B01E"],[ "ğ›€Ÿ","é–‘" ,"U+1B01F"],[ "ğ›€ ","é¦™" ,"U+1B020"],[ "ğ›€¡","é§•" ,"U+1B021"],[ "ğ›€¢","å®¶" ,"U+1B022"]],
"ã": [[ "ğ›€£","å–œ" ,"U+1B023"],[ "ğ›€¤","å¹¾" ,"U+1B024"],[ "ğ›€¥","å¹¾" ,"U+1B025"],[ "ğ›€¦","æ”¯" ,"U+1B026"],[ "ğ›€§","æœ¨" ,"U+1B027"],[ "ğ›€¨","ç¥ˆ" ,"U+1B028"],[ "ğ›€©","è²´" ,"U+1B029"],[ "ğ›€ª","èµ·" ,"U+1B02A"],[ "ğ›€»","æœŸ" ,"U+1B03B"]],
"ã": [[ "ğ›€«","ä¹…" ,"U+1B02B"],[ "ğ›€¬","ä¹…" ,"U+1B02C"],[ "ğ›€­","ä¹" ,"U+1B02D"],[ "ğ›€®","ä¾›" ,"U+1B02E"],[ "ğ›€¯","å€¶" ,"U+1B02F"],[ "ğ›€°","å…·" ,"U+1B030"],[ "ğ›€±","æ±‚" ,"U+1B031"]],
"ã‘": [[ "ğ›€²","ä»‹" ,"U+1B032"],[ "ğ›€³","ä»‹" ,"U+1B033"],[ "ğ›€´","å¸Œ" ,"U+1B034"],[ "ğ›€µ","æ°£" ,"U+1B035"],[ "ğ›€¶","è¨ˆ" ,"U+1B036"],[ "ğ›€·","é£" ,"U+1B037"],[ "ğ›€¢","å®¶" ,"U+1B022"]],
"ã“": [[ "ğ›€¸","å¤" ,"U+1B038"],[ "ğ›€¹","æ•…" ,"U+1B039"],[ "ğ›€º","è¨±" ,"U+1B03A"],[ "ğ›€»","æœŸ" ,"U+1B03B"],[ "ğ›‚˜","å­" ,"U+1B098"]],
"ã•": [[ "ğ›€¼","ä¹" ,"U+1B03C"],[ "ğ›€½","ä½" ,"U+1B03D"],[ "ğ›€¾","ä½" ,"U+1B03E"],[ "ğ›€¿","å·¦" ,"U+1B03F"],[ "ğ›€","å·®" ,"U+1B040"],[ "ğ›","æ•£" ,"U+1B041"],[ "ğ›‚","æ–œ" ,"U+1B042"],[ "ğ›ƒ","æ²™" ,"U+1B043"]],
"ã—": [[ "ğ›„","ä¹‹" ,"U+1B044"],[ "ğ›…","ä¹‹" ,"U+1B045"],[ "ğ›†","äº‹" ,"U+1B046"],[ "ğ›‡","å››" ,"U+1B047"],[ "ğ›ˆ","å¿—" ,"U+1B048"],[ "ğ›‰","æ–°" ,"U+1B049"]],
"ã™": [[ "ğ›Š","å—" ,"U+1B04A"],[ "ğ›‹","å£½" ,"U+1B04B"],[ "ğ›Œ","æ•¸" ,"U+1B04C"],[ "ğ›","æ•¸" ,"U+1B04D"],[ "ğ›","æ˜¥" ,"U+1B04E"],[ "ğ›","æ˜¥" ,"U+1B04F"],[ "ğ›","é ˆ" ,"U+1B050"],[ "ğ›‘","é ˆ" ,"U+1B051"]],
"ã›": [[ "ğ›’","ä¸–" ,"U+1B052"],[ "ğ›“","ä¸–" ,"U+1B053"],[ "ğ›”","ä¸–" ,"U+1B054"],[ "ğ›•","å‹¢" ,"U+1B055"],[ "ğ›–","è²" ,"U+1B056"]],
"ã": [[ "ğ›—","æ‰€" ,"U+1B057"],[ "ğ›˜","æ‰€" ,"U+1B058"],[ "ğ›™","æ›¾" ,"U+1B059"],[ "ğ›š","æ›¾" ,"U+1B05A"],[ "ğ››","æ¥š" ,"U+1B05B"],[ "ğ›œ","è˜‡" ,"U+1B05C"],[ "ğ›","è™•" ,"U+1B05D"]],
"ãŸ": [[ "ğ›","å ‚" ,"U+1B05E"],[ "ğ›Ÿ","å¤š" ,"U+1B05F"],[ "ğ› ","å¤š" ,"U+1B060"],[ "ğ›¡","ç•¶" ,"U+1B061"]],
"ã¡": [[ "ğ›¢","åƒ" ,"U+1B062"],[ "ğ›£","åœ°" ,"U+1B063"],[ "ğ›¤","æ™º" ,"U+1B064"],[ "ğ›¥","çŸ¥" ,"U+1B065"],[ "ğ›¦","çŸ¥" ,"U+1B066"],[ "ğ›§","è‡´" ,"U+1B067"],[ "ğ›¨","é²" ,"U+1B068"]],
"ã¤": [[ "ğ›©","å·" ,"U+1B069"],[ "ğ›ª","å·" ,"U+1B06A"],[ "ğ›«","æ´¥" ,"U+1B06B"],[ "ğ›¬","éƒ½" ,"U+1B06C"],[ "ğ›­","å¾’" ,"U+1B06D"]],
"ã¦": [[ "ğ›®","äº­" ,"U+1B06E"],[ "ğ›¯","ä½" ,"U+1B06F"],[ "ğ›°","å‚³" ,"U+1B070"],[ "ğ›±","å¤©" ,"U+1B071"],[ "ğ›²","å¤©" ,"U+1B072"],[ "ğ›³","å¤©" ,"U+1B073"],[ "ğ›´","å¸" ,"U+1B074"],[ "ğ›µ","å¼–" ,"U+1B075"],[ "ğ›¶","è½‰" ,"U+1B076"],[ "ğ›‚","è€Œ" ,"U+1B08E"]],
"ã¨": [[ "ğ›·","åœŸ" ,"U+1B077"],[ "ğ›¸","åº¦" ,"U+1B078"],[ "ğ›¹","æ±" ,"U+1B079"],[ "ğ›º","ç™»" ,"U+1B07A"],[ "ğ›»","ç™»" ,"U+1B07B"],[ "ğ›¼","ç ¥" ,"U+1B07C"],[ "ğ›­","å¾’" ,"U+1B06D"],[ "ğ›½","ç­‰" ,"U+1B07D"]],
"ãª": [[ "ğ›¾","å—" ,"U+1B07E"],[ "ğ›¿","å" ,"U+1B07F"],[ "ğ›‚€","å¥ˆ" ,"U+1B080"],[ "ğ›‚","å¥ˆ" ,"U+1B081"],[ "ğ›‚‚","å¥ˆ" ,"U+1B082"],[ "ğ›‚ƒ","èœ" ,"U+1B083"],[ "ğ›‚„","é‚£" ,"U+1B084"],[ "ğ›‚…","é‚£" ,"U+1B085"],[ "ğ›‚†","é›£" ,"U+1B086"]],
"ã«": [[ "ğ›‚‡","ä¸¹" ,"U+1B087"],[ "ğ›‚ˆ","äºŒ" ,"U+1B088"],[ "ğ›‚‰","ä»" ,"U+1B089"],[ "ğ›‚Š","å…’" ,"U+1B08A"],[ "ğ›‚‹","çˆ¾" ,"U+1B08B"],[ "ğ›‚Œ","çˆ¾" ,"U+1B08C"],[ "ğ›‚","è€³" ,"U+1B08D"],[ "ğ›‚","è€Œ" ,"U+1B08E"]],
"ã¬": [[ "ğ›‚","åŠª" ,"U+1B08F"],[ "ğ›‚","å¥´" ,"U+1B090"],[ "ğ›‚‘","æ€’" ,"U+1B091"]],
"ã­": [[ "ğ›‚’","å¹´" ,"U+1B092"],[ "ğ›‚“","å¹´" ,"U+1B093"],[ "ğ›‚”","å¹´" ,"U+1B094"],[ "ğ›‚•","æ ¹" ,"U+1B095"],[ "ğ›‚–","ç†±" ,"U+1B096"],[ "ğ›‚—","ç¦°" ,"U+1B097"],[ "ğ›‚˜","å­" ,"U+1B098"]],
"ã®": [[ "ğ›‚™","ä¹ƒ" ,"U+1B099"],[ "ğ›‚š","æ¿ƒ" ,"U+1B09A"],[ "ğ›‚›","èƒ½" ,"U+1B09B"],[ "ğ›‚œ","èƒ½" ,"U+1B09C"],[ "ğ›‚","è¾²" ,"U+1B09D"]],
"ã¯": [[ "ğ›‚","å…«" ,"U+1B09E"],[ "ğ›‚Ÿ","åŠ" ,"U+1B09F"],[ "ğ›‚ ","å©†" ,"U+1B0A0"],[ "ğ›‚¡","æ³¢" ,"U+1B0A1"],[ "ğ›‚¢","ç›¤" ,"U+1B0A2"],[ "ğ›‚£","ç›¤" ,"U+1B0A3"],[ "ğ›‚¤","ç ´" ,"U+1B0A4"],[ "ğ›‚¥","è€…" ,"U+1B0A5"],[ "ğ›‚¦","è€…" ,"U+1B0A6"],[ "ğ›‚§","è‘‰" ,"U+1B0A7"],[ "ğ›‚¨","é —" ,"U+1B0A8"]],
"ã²": [[ "ğ›‚©","æ‚²" ,"U+1B0A9"],[ "ğ›‚ª","æ—¥" ,"U+1B0AA"],[ "ğ›‚«","æ¯”" ,"U+1B0AB"],[ "ğ›‚¬","é¿" ,"U+1B0AC"],[ "ğ›‚­","é" ,"U+1B0AD"],[ "ğ›‚®","é£›" ,"U+1B0AE"],[ "ğ›‚¯","é£›" ,"U+1B0AF"]],
"ãµ": [[ "ğ›‚°","ä¸" ,"U+1B0B0"],[ "ğ›‚±","å©¦" ,"U+1B0B1"],[ "ğ›‚²","å¸ƒ" ,"U+1B0B2"]],
"ã¸": [[ "ğ›‚³","å€" ,"U+1B0B3"],[ "ğ›‚´","å¼Š" ,"U+1B0B4"],[ "ğ›‚µ","å¼Š" ,"U+1B0B5"],[ "ğ›‚¶","é" ,"U+1B0B6"],[ "ğ›‚·","é‚Š" ,"U+1B0B7"],[ "ğ›‚¸","é‚Š" ,"U+1B0B8"],[ "ğ›‚¹","éƒ¨" ,"U+1B0B9"]],
"ã»": [[ "ğ›‚º","ä¿" ,"U+1B0BA"],[ "ğ›‚»","ä¿" ,"U+1B0BB"],[ "ğ›‚¼","å ±" ,"U+1B0BC"],[ "ğ›‚½","å¥‰" ,"U+1B0BD"],[ "ğ›‚¾","å¯¶" ,"U+1B0BE"],[ "ğ›‚¿","æœ¬" ,"U+1B0BF"],[ "ğ›ƒ€","æœ¬" ,"U+1B0C0"],[ "ğ›ƒ","è±" ,"U+1B0C1"]],
"ã¾": [[ "ğ›ƒ‚","ä¸‡" ,"U+1B0C2"],[ "ğ›ƒƒ","æœ«" ,"U+1B0C3"],[ "ğ›ƒ„","æœ«" ,"U+1B0C4"],[ "ğ›ƒ…","æ»¿" ,"U+1B0C5"],[ "ğ›ƒ†","æ»¿" ,"U+1B0C6"],[ "ğ›ƒ‡","è¬" ,"U+1B0C7"],[ "ğ›ƒˆ","éº»" ,"U+1B0C8"],[ "ğ›ƒ–","é¦¬" ,"U+1B0D6"]],
"ã¿": [[ "ğ›ƒ‰","ä¸‰" ,"U+1B0C9"],[ "ğ›ƒŠ","å¾®" ,"U+1B0CA"],[ "ğ›ƒ‹","ç¾" ,"U+1B0CB"],[ "ğ›ƒŒ","ç¾" ,"U+1B0CC"],[ "ğ›ƒ","ç¾" ,"U+1B0CD"],[ "ğ›ƒ","è¦‹" ,"U+1B0CE"],[ "ğ›ƒ","èº«" ,"U+1B0CF"]],
"ã‚€": [[ "ğ›ƒ","æ­¦" ,"U+1B0D0"],[ "ğ›ƒ‘","ç„¡" ,"U+1B0D1"],[ "ğ›ƒ’","ç‰Ÿ" ,"U+1B0D2"],[ "ğ›ƒ“","èˆ" ,"U+1B0D3"],[ "ğ›„","æ— " ,"U+1B11D"],[ "ğ›„","æ— " ,"U+1B11E"]],
"ã‚": [[ "ğ›ƒ”","å…" ,"U+1B0D4"],[ "ğ›ƒ•","é¢" ,"U+1B0D5"],[ "ğ›ƒ–","é¦¬" ,"U+1B0D6"]],
"ã‚‚": [[ "ğ›ƒ—","æ¯" ,"U+1B0D7"],[ "ğ›ƒ˜","æ¯›" ,"U+1B0D8"],[ "ğ›ƒ™","æ¯›" ,"U+1B0D9"],[ "ğ›ƒš","æ¯›" ,"U+1B0DA"],[ "ğ›ƒ›","èŒ‚" ,"U+1B0DB"],[ "ğ›ƒœ","è£³" ,"U+1B0DC"],[ "ğ›„","æ— " ,"U+1B11D"],[ "ğ›„","æ— " ,"U+1B11E"]],
"ã‚„": [[ "ğ›ƒ","ä¹Ÿ" ,"U+1B0DD"],[ "ğ›ƒ","ä¹Ÿ" ,"U+1B0DE"],[ "ğ›ƒŸ","å±‹" ,"U+1B0DF"],[ "ğ›ƒ ","è€¶" ,"U+1B0E0"],[ "ğ›ƒ¡","è€¶" ,"U+1B0E1"],[ "ğ›ƒ¢","å¤œ" ,"U+1B0E2"]],
"ã‚†": [[ "ğ›ƒ£","æ¸¸" ,"U+1B0E3"],[ "ğ›ƒ¤","ç”±" ,"U+1B0E4"],[ "ğ›ƒ¥","ç”±" ,"U+1B0E5"],[ "ğ›ƒ¦","éŠ" ,"U+1B0E6"]],
"ã‚ˆ": [[ "ğ›ƒ§","ä»£" ,"U+1B0E7"],[ "ğ›ƒ¨","ä½™" ,"U+1B0E8"],[ "ğ›ƒ©","èˆ‡" ,"U+1B0E9"],[ "ğ›ƒª","èˆ‡" ,"U+1B0EA"],[ "ğ›ƒ«","èˆ‡" ,"U+1B0EB"],[ "ğ›ƒ¬","é¤˜" ,"U+1B0EC"],[ "ğ›ƒ¢","å¤œ" ,"U+1B0E2"]],
"ã‚‰": [[ "ğ›ƒ­","ç¾…" ,"U+1B0ED"],[ "ğ›ƒ®","è‰¯" ,"U+1B0EE"],[ "ğ›ƒ¯","è‰¯" ,"U+1B0EF"],[ "ğ›ƒ°","è‰¯" ,"U+1B0F0"],[ "ğ›½","ç­‰" ,"U+1B07D"]],
"ã‚Š": [[ "ğ›ƒ±","åˆ©" ,"U+1B0F1"],[ "ğ›ƒ²","åˆ©" ,"U+1B0F2"],[ "ğ›ƒ³","æ" ,"U+1B0F3"],[ "ğ›ƒ´","æ¢¨" ,"U+1B0F4"],[ "ğ›ƒµ","ç†" ,"U+1B0F5"],[ "ğ›ƒ¶","é‡Œ" ,"U+1B0F6"],[ "ğ›ƒ·","é›¢" ,"U+1B0F7"]],
"ã‚‹": [[ "ğ›ƒ¸","æµ" ,"U+1B0F8"],[ "ğ›ƒ¹","ç•™" ,"U+1B0F9"],[ "ğ›ƒº","ç•™" ,"U+1B0FA"],[ "ğ›ƒ»","ç•™" ,"U+1B0FB"],[ "ğ›ƒ¼","ç´¯" ,"U+1B0FC"],[ "ğ›ƒ½","é¡" ,"U+1B0FD"]],
"ã‚Œ": [[ "ğ›ƒ¾","ç¦®" ,"U+1B0FE"],[ "ğ›ƒ¿","ç¦®" ,"U+1B0FF"],[ "ğ›„€","é€£" ,"U+1B100"],[ "ğ›„","éº—" ,"U+1B101"]],
"ã‚": [[ "ğ›„‚","å‘‚" ,"U+1B102"],[ "ğ›„ƒ","å‘‚" ,"U+1B103"],[ "ğ›„„","å©" ,"U+1B104"],[ "ğ›„…","æ¨“" ,"U+1B105"],[ "ğ›„†","è·¯" ,"U+1B106"],[ "ğ›„‡","éœ²" ,"U+1B107"]],
"ã‚": [[ "ğ›„ˆ","å€­" ,"U+1B108"],[ "ğ›„‰","å’Œ" ,"U+1B109"],[ "ğ›„Š","å’Œ" ,"U+1B10A"],[ "ğ›„‹","ç‹" ,"U+1B10B"],[ "ğ›„Œ","ç‹" ,"U+1B10C"]],
"ã‚": [[ "ğ›„","äº•" ,"U+1B10D"],[ "ğ›„","äº•" ,"U+1B10E"],[ "ğ›„","å±…" ,"U+1B10F"],[ "ğ›„","çˆ²" ,"U+1B110"],[ "ğ›„‘","éº" ,"U+1B111"]],
"ã‚‘": [[ "ğ›„’","æƒ " ,"U+1B112"],[ "ğ›„“","è¡" ,"U+1B113"],[ "ğ›„”","è¡" ,"U+1B114"],[ "ğ›„•","è¡" ,"U+1B115"]],
"ã‚’": [[ "ğ›„–","ä¹" ,"U+1B116"],[ "ğ›„—","ä¹" ,"U+1B117"],[ "ğ›„˜","å°¾" ,"U+1B118"],[ "ğ›„™","ç·’" ,"U+1B119"],[ "ğ›„š","è¶Š" ,"U+1B11A"],[ "ğ›„›","é " ,"U+1B11B"],[ "ğ›„œ","é " ,"U+1B11C"],[ "ğ›€…","æƒ¡" ,"U+1B005"]],
"ã‚“": [[ "ğ›„","æ— " ,"U+1B11D"],[ "ğ›„","æ— " ,"U+1B11E"]]
}

function randomEntry(a:Array<any>){
	return a[Math.floor(Math.random()*a.length)]
}

function hentaiganafy(s:string,mode=0){
	s=normalize(s)
	let t=''
	for(let i = 0; i<s.length; i++){
		let c=s[i]
		const options = hira2hentai[c]
		if(options){
			let entry = randomEntry(options)
			c=entry[mode]
		}
		t+=c
	}
	return t
}

// const input = prompt()??
// 	'ã‚ã‹ã‚Šã¾ã™ã‹?'

// const output = hentaiganafy(input,0)

// alert(output)
//
// })()
